<template name = "answersForm">
    <form class="answersForm" id="{{currentSection.id}}" >
		{{#each questions questionsColl}}
                        {{#if equals type "binary"}}
                            {{> questionBinary}}
                        {{else}} 
                            {{#if equals type "quad"}}
                                {{> questionQuad this context=..}}
                            {{else}}
                                {{#if equals type "chooseStrategy"}}
                                {{> questionGame}}
                                {{else}} 
                                    {{#if equals type "chooseStrategyTop"}}
                                        {{> questionGame}}
                                    {{else}} 
                                        {{#if equals type "chooseOutcome"}}
                                            {{> questionGame}}
                                        {{else}} 
                                            {{#if equals type "dropdown"}}
                                                {{> questionDropdown this}}
                                            {{else}} 
                                                {{#if equals type "text"}}
                                                    {{> questionText this}}
                                                {{/if}}
                                            {{/if}}
                                        {{/if}}
                                    {{/if}}
                                {{/if}}
                            {{/if}}
                        {{/if}}
		{{/each}}
        {{#if equals currentSection.type "experiment"}}
                    {{#if testQuizIncomplete}}
                    <div class = "alert alert-warning">You did not answer all of the questions.</div>
                    {{/if}}
        {{else}}
        {{#if equals currentSection.id "quiz"}}
            <section class="expPaneMargin">
            {{#if testQuizPassed}}
                <div class = "alert alert-success">You have successfully passed the quiz! Click <strong>NEXT</strong>.</div>
            {{else}} {{#if testQuizFailed}}
            <div class = "alert alert-danger">You have exhausted your attempts to pass the quiz and demonstrate comprehension of the instructions. Click <strong>NEXT</strong>.</div>
            {{else}} {{#if testQuizWrong }}
                <div class = "alert alert-warning">One or more of your answers is incorrect. Attempts remaining: {{quizTriesLeft}}.</div>
            {{/if}}				
            {{/if}}
            {{/if}}
            </section>
        {{/if}}
        {{/if}}
        <br/>
        <section class="expPaneMargin">
        <br/>
        {{> submitButton}}
        </section>
	</form>
</template>
<template name = "questionBinary">
    <section class="expPaneNoMargin experiment"> 
    <div class = "expQuestion {{questionClass}} form-group {{getHasError _id}}" id="{{_id}}">
        <label for="{{_id}}" class = "control-label {{disabled _id}}">{{text}}</label>
        <div id={{_id}} name={{_id}} class="expChoices" role="group">
            <button type=button class="btn btn-primary btn-lg experimentChoices expChoice {{disabled _id}}" choice="A" >
                Queue A
            </button>
            <button type=button class="btn btn-primary btn-lg experimentChoices expChoice {{disabled _id}}" choice="B" >
                Queue B
            </button>
        </div>
    </div>
    </section> 
</template>

<template name = "questionQuad">
    <section class="expPaneNoMargin experiment"> 
    <div class = "expQuestion {{questionClass}} form-group {{getHasError _id}}" id="{{_id}}">
        <label for="{{_id}}" class = "control-label {{disabled _id}}">{{text}}</label>
        <div id={{id}} name={{id}} class="expChoices" role="group">
            {{#each options dataContext=.. }}
                <button type=button
                    class="btn btn-primary btn-lg experimentChoices expChoice {{#if disabled}}disabled{{/if}}" 
                    choice="{{name}}" >
                    {{name}}
            </button>
            {{/each}}
        </div>
    </div>
    </section> 
</template>
<template name = "questionDropdown">
    <section class="expPaneNoMargin experiment"> 
    <div class = "expQuestion {{questionClass}} form-group {{getHasError _id}}" id="{{_id}}">
        <label for="{{_id}}" class = "control-label {{disabled _id}}">{{text}}</label>
        <div id={{_id}} name={{_id}} class="expChoices" role="group">
            <select class="dropdown__menu" id="category-select" {{disabled _id}}>
                <option hidden="hidden" value='' {{disabled _id}} >Please Select</option>
                {{#each options dataContext=.. }}
                    <option class='expChoice' choice="{{name}}" value="{{name}}" {{disabled _id}} >{{name}}</option>
                {{/each}}
            </select>
        </div>
    </div>
    </section> 
</template>

<template name = "questionText">
    <section class="expPaneNoMargin experiment"> 
    <div class = "expQuestion {{questionClass}} form-group {{getHasError _id}}" id="{{_id}}">
        <label for="{{_id}}" class = "control-label {{disabled _id}}">{{text}}</label>
        <div id={{_id}} name={{_id}} class="expChoices" role="group">
            <!-- <input id="{{_id}}" name="{{_id}}" value="text" class = "sm-width form-control expChoice"> -->
            <input id="{{_id}}" name="{{_id}}" type="text" class="sm-width form-control expChoice" title="{{fieldname}}" pattern="{{pattern}}" {{disabled _id}} />
        </div>
    </div>
    </section> 
</template>

<template name="proceedButton">
    <div> 
        {{#if equals id "instructions"}}
            <button type=button id="{{id}}" class="btn btn-sm generalNavButton proceedButton pull-right" autofocus >Next</button>
        {{else}} {{#if equals id "submitHIT"}}
        {{else}}
            <button type=button id="{{id}}" class="btn btn-sm generalNavButton proceedButton pull-right {{disabled}}" autofocus >Next</button>
        {{/if}}
        {{/if}}
    </div> 
</template>

<template name="submitButton">
    <button type="submit" class="btn btn-primary btn-sm generalNavButton answersForm {{disabled}}" aria-label="Left Align" style="margin-left:auto; margin-right:auto; display:block" autofocus >
        Submit
    </button>
</template>

<template name="navButton">
    <button type="button" class = "btn-link navButton" aria-label="Left Align" style="margin-left:auto; margin-right:auto; display:block" value={{targetSection.id}} autofocus >
        {{targetSection.label}}
    </button>
</template>

<template name="binaryForcedChoice" >
</template>

<template name="expGeneralInfoBox">
    <div class="expInfoTable">
        <ul class="list-group">
            <li class="list-group-item">
                Assignment Id:<br/>{{subStat.userId}}&nbsp;<!--space is here for robustness to dynamic contents-->
            </li>
            <li class="list-group-item">
                Meteor Id:<br/>{{subStat.meteorUserId}}&nbsp;
            </li>
        </ul>
    </div>
</template>
